<html lang="en">

<head>
    <title>Sign in</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-signin-client_id"
          content="159519841144-9ai8rcbak4i1bl36i72crp612kv2jlkr.apps.googleusercontent.com">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <link rel="stylesheet" href="https://bootswatch.com/5/litera/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
            crossorigin="anonymous"></script>
    <!--    <link rel="stylesheet" href="https://bootswatch.com/5/flatly/bootstrap.min.css">-->
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://apis.google.com/js/platform.js" async defer></script>

<div class="container unauthenticated">
    <div class="info">
        <h1 style="text-align: center;">登入</h1>
        <div class="text text-h-center">
            <p>帳號 <input class="text-h-center"></p>
            <p>密碼 <input class="text-h-center" type="password"></p>
            <div class="txt">
                <a href="#.html" id="forget">忘記密碼</a>
            </div>

        </div>
        <!-- Button trigger modal -->
        <div>
            <button type="button" clas="btn btn-info text" onclick="location.href='register.html'">註冊</button>

        </div>
        <div class="justify-content:between;">
            <button type="button" class="btn btn-info text" id="btn1" data-bs-toggle="modal"
                    data-bs-target="#exampleModal">
                第三方登入
            </button>
            <button type="button" class="btn btn-info text" id="btn2">登入</button>
        </div>

        <img id="img"
             src="https://s1.chu0.com/src/img/gif/e0/e02d5b5e4f16407b826031bbe148a5be.gif?e=1735488000&token=1srnZGLKZ0Aqlz6dk7yF4SkiYf4eP-YrEOdM1sob:PczPbxpGSRM8C8kyO43OndFmbzU=">
    </div>
    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"
         style="display: none;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">第三方登入</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <input type="button" value="Google" onclick="location.href='/oauth2/authorization/google'">
                    <input type="button" value="Facebook" onclick="location.href='/oauth2/authorization/facebook'">
                    <input type="button" value="Github" onclick="location.href='/oauth2/authorization/github'">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container authenticated" style="display: none">
    Logged in as: <span id="user"></span>
    <div>
        <button onclick="logout()" class="btn btn-primary">Logout</button>
    </div>
</div>
<script tpye="text/javascript" src="/webjars/js-cookie/js.cookie.js">
</script>
<script tpye="text/javascript">
    $.ajaxSetup({
        beforeSend: function(xhr,settings){
            if(settings.type == "POST"　|| settings.type == "PUT" || settings.type == "DELETE"){
                if(!(/^http:.*/.test(settings.url)||/^https:.*/.test(settings.url))){
                    xhr.setRequestHeader("X-XSRF-TOKEN",Cookies.get("XSRF-TOKEN"));
                }
            }
        }
    });
    $.get("/user",function(data){
    console.log(123);
        location.replace(" http://localhost:8080/home.html") ;
        $("#user").html(data.name);
        $(".unauthenticated").hide();
        $(".authenticated").show();
    })
    var logout = function(){
        $.post("/logout",function(){
            $("#user").html("");
            $(".unauthenticated").show();
            $(".authenticated").hide();
        })
        return true;
    }
    </script>
</body>

</html>